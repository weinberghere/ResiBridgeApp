<!DOCTYPE html>
<html>

  <head>
    <title>ResiBridge Tech App - Active Customers</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>

  <body>
    <header>
      <div class="container">
        <div class="logo">ResiBridge Tech App</div>
        <nav>
          <ul>
            <li>
              <a href="/">TechApp</a>
            </li>
            <li class="dropdown">
              <a href="#" class="dropbtn">Customers</a>
              <div class="dropdown-content">
                <a href="/customers">Customers</a>
                <a href="/customers_active">Customers Active</a>
              </div>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <main>
      <h1>Active Customers</h1>
      {% if token_status == 'active' %}
      <button class="active">Token Active</button>
      {% else %}
      <button class="inactive">Token Expired</button>
      <form action="/refresh" method="post">
        <input type="submit" value="Refresh Token">
      </form>
      {% endif %}
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Login</th>
            <th>Email</th>
            <th>Phone</th>
          </tr>
        </thead>
        <tbody>
          {% for customer in customers %}
          {% if customer.status == 'active' %}
          <tr id="customerRow{{ customer.id }}" onclick="showCustomerAttributes('{{ customer.id }}')">
            <td>{{ customer.id }}</td>
            <td>{{ customer.name }}</td>
            <td>{{ customer.login }}</td>
            <td>{{ customer.email }}</td>
            <td>{{ customer.phone }}</td>
          </tr>
          {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </main>
    <footer>
      <p>&copy; 2023 ResiBridge</p>
    </footer>
    <script>
      function showCustomerAttributes(customerId) {
        fetch(`https://resibridge.splynx.app/api/2.0/admin/customers/customer/${customerId}`)
          .then(response => response.json())
          .then(data => {
            console.log(data); // Print the customer attributes to the console for testing
            // Display the customer attributes in a dialog or alert box
            alert(JSON.stringify(data));
          })
          .catch(error => {
            console.error('Error:', error);
          });
      }
    </script>

</html>